<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Comparison Calculator: OBBA vs Pre-TCJA</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            padding: 30px;
        }

        .input-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            height: fit-content;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }

        .input-group select,
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-group select:focus,
        .input-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .results-section {
            background: white;
            border-radius: 15px;
            padding: 25px;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .scenario-card {
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .scenario-card.obba {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border-color: #27ae60;
        }

        .scenario-card.pre-tcja {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-color: #e74c3c;
        }

        .scenario-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .tax-amount {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .effective-rate {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .savings-summary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 30px;
        }

        .savings-amount {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .breakdown-table {
            background: #f8f9fa;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 20px;
        }

        .breakdown-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .breakdown-table th {
            background: #34495e;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .breakdown-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #e1e8ed;
        }

        .breakdown-table tr:nth-child(even) {
            background: rgba(52, 152, 219, 0.05);
        }

        .highlight {
            font-weight: 600;
            color: #2c3e50;
        }

        .info-box {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

        .info-box h4 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .info-box p {
            color: #7f8c8d;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Tax Impact Calculator</h1>
            <p>Compare "One Big Beautiful Bill Act" vs. Pre-TCJA Tax Rules for 2025</p>
        </div>

        <div class="content">
            <div class="input-section">
                <h3 style="margin-bottom: 20px; color: #2c3e50;">Your Tax Information</h3>
                
                <div class="input-group">
                    <label for="filingStatus">Filing Status</label>
                    <select id="filingStatus">
                        <option value="single">Single</option>
                        <option value="marriedJoint">Married Filing Jointly</option>
                        <option value="marriedSeparate">Married Filing Separately</option>
                        <option value="headOfHousehold">Head of Household</option>
                    </select>
                </div>

                <div class="input-group">
                    <label for="income">Annual Income</label>
                    <input type="number" id="income" placeholder="e.g., 75000" value="75000">
                </div>

                <div class="input-group">
                    <label for="age">Your Age</label>
                    <input type="number" id="age" placeholder="e.g., 35" value="35">
                </div>

                <div class="input-group">
                    <label for="children">Number of Children (under 17)</label>
                    <input type="number" id="children" placeholder="e.g., 2" value="0" min="0">
                </div>

                <div class="input-group">
                    <label for="saltDeduction">State & Local Taxes Paid</label>
                    <input type="number" id="saltDeduction" placeholder="e.g., 15000" value="0">
                </div>

                <div class="input-group">
                    <label for="otherItemized">Other Itemized Deductions</label>
                    <input type="number" id="otherItemized" placeholder="e.g., 5000" value="0">
                </div>

                <button class="calculate-btn" onclick="calculateTaxes()">Calculate Tax Impact</button>

                <div class="info-box">
                    <h4>How to Use This Calculator</h4>
                    <p>Enter your income and family information to see how much you would save (or pay extra) under the One Big Beautiful Bill Act compared to reverting to pre-2017 tax rules.</p>
                </div>
            </div>

            <div class="results-section">
                <div id="results" style="display: none;">
                    <div class="savings-summary">
                        <div class="savings-amount" id="savingsAmount">$0</div>
                        <div id="savingsText">Annual Tax Savings with OBBA</div>
                    </div>

                    <div class="comparison-grid">
                        <div class="scenario-card obba">
                            <div class="scenario-title">One Big Beautiful Bill Act</div>
                            <div class="tax-amount" id="obbaTax">$0</div>
                            <div class="effective-rate" id="obbaRate">Effective Rate: 0%</div>
                        </div>

                        <div class="scenario-card pre-tcja">
                            <div class="scenario-title">Pre-TCJA Rules (2025)</div>
                            <div class="tax-amount" id="preTcjaTax">$0</div>
                            <div class="effective-rate" id="preTcjaRate">Effective Rate: 0%</div>
                        </div>
                    </div>

                    <div class="breakdown-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tax Component</th>
                                    <th>OBBA (Current Law)</th>
                                    <th>Pre-TCJA Rules</th>
                                    <th>Difference</th>
                                </tr>
                            </thead>
                            <tbody id="breakdownTable">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="placeholder" style="text-align: center; padding: 60px 20px; color: #7f8c8d;">
                    <h3>Enter your information and click "Calculate Tax Impact" to see the comparison</h3>
                    <p style="margin-top: 15px;">This calculator will show you the difference between the One Big Beautiful Bill Act (which passed in July 2025) and what your taxes would have been under pre-2017 tax rules.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // OBBA (2025) tax brackets
        const obbaBrackets = {
            single: [
                { min: 0, max: 11925, rate: 0.10 },
                { min: 11925, max: 48475, rate: 0.12 },
                { min: 48475, max: 103350, rate: 0.22 },
                { min: 103350, max: 197300, rate: 0.24 },
                { min: 197300, max: 250525, rate: 0.32 },
                { min: 250525, max: 626350, rate: 0.35 },
                { min: 626350, max: Infinity, rate: 0.37 }
            ],
            marriedJoint: [
                { min: 0, max: 23850, rate: 0.10 },
                { min: 23850, max: 96950, rate: 0.12 },
                { min: 96950, max: 206700, rate: 0.22 },
                { min: 206700, max: 394600, rate: 0.24 },
                { min: 394600, max: 501050, rate: 0.32 },
                { min: 501050, max: 751600, rate: 0.35 },
                { min: 751600, max: Infinity, rate: 0.37 }
            ],
            marriedSeparate: [
                { min: 0, max: 11925, rate: 0.10 },
                { min: 11925, max: 48475, rate: 0.12 },
                { min: 48475, max: 103350, rate: 0.22 },
                { min: 103350, max: 197300, rate: 0.24 },
                { min: 197300, max: 250525, rate: 0.32 },
                { min: 250525, max: 375800, rate: 0.35 },
                { min: 375800, max: Infinity, rate: 0.37 }
            ],
            headOfHousehold: [
                { min: 0, max: 17000, rate: 0.10 },
                { min: 17000, max: 64850, rate: 0.12 },
                { min: 64850, max: 103350, rate: 0.22 },
                { min: 103350, max: 197300, rate: 0.24 },
                { min: 197300, max: 250500, rate: 0.32 },
                { min: 250500, max: 626350, rate: 0.35 },
                { min: 626350, max: Infinity, rate: 0.37 }
            ]
        };

        // Pre-TCJA (2025 adjusted) tax brackets
        const preTcjaBrackets = {
            single: [
                { min: 0, max: 11925, rate: 0.10 },
                { min: 11925, max: 47450, rate: 0.15 },
                { min: 47450, max: 121300, rate: 0.25 },
                { min: 121300, max: 196650, rate: 0.28 },
                { min: 196650, max: 515350, rate: 0.33 },
                { min: 515350, max: 551450, rate: 0.35 },
                { min: 551450, max: Infinity, rate: 0.396 }
            ],
            marriedJoint: [
                { min: 0, max: 23850, rate: 0.10 },
                { min: 23850, max: 94900, rate: 0.15 },
                { min: 94900, max: 242600, rate: 0.25 },
                { min: 242600, max: 393300, rate: 0.28 },
                { min: 393300, max: 515350, rate: 0.33 },
                { min: 515350, max: 602900, rate: 0.35 },
                { min: 602900, max: Infinity, rate: 0.396 }
            ],
            marriedSeparate: [
                { min: 0, max: 11925, rate: 0.10 },
                { min: 11925, max: 47450, rate: 0.15 },
                { min: 47450, max: 121300, rate: 0.25 },
                { min: 121300, max: 196650, rate: 0.28 },
                { min: 196650, max: 257675, rate: 0.33 },
                { min: 257675, max: 301450, rate: 0.35 },
                { min: 301450, max: Infinity, rate: 0.396 }
            ],
            headOfHousehold: [
                { min: 0, max: 17300, rate: 0.10 },
                { min: 17300, max: 66150, rate: 0.15 },
                { min: 66150, max: 170050, rate: 0.25 },
                { min: 170050, max: 249100, rate: 0.28 },
                { min: 249100, max: 541550, rate: 0.33 },
                { min: 541550, max: 577650, rate: 0.35 },
                { min: 577650, max: Infinity, rate: 0.396 }
            ]
        };

        // Standard deductions
        const standardDeductions = {
            obba: {
                single: 15750,
                marriedJoint: 31500,
                marriedSeparate: 15750,
                headOfHousehold: 23625
            },
            preTcja: {
                single: 8350,
                marriedJoint: 16700,
                marriedSeparate: 8350,
                headOfHousehold: 12550
            }
        };

        // Personal exemptions (pre-TCJA only)
        const personalExemption = 5300;

        function calculateIncomeTax(taxableIncome, brackets) {
            let tax = 0;
            for (let bracket of brackets) {
                if (taxableIncome > bracket.min) {
                    const taxableInThisBracket = Math.min(taxableIncome, bracket.max) - bracket.min;
                    tax += taxableInThisBracket * bracket.rate;
                }
            }
            return tax;
        }

        function calculateTaxes() {
            const filingStatus = document.getElementById('filingStatus').value;
            const income = parseFloat(document.getElementById('income').value) || 0;
            const age = parseInt(document.getElementById('age').value) || 0;
            const children = parseInt(document.getElementById('children').value) || 0;
            const saltDeduction = parseFloat(document.getElementById('saltDeduction').value) || 0;
            const otherItemized = parseFloat(document.getElementById('otherItemized').value) || 0;

            // OBBA calculations
            const obbaStandardDed = standardDeductions.obba[filingStatus];
            const obbaSeniorDeduction = age >= 65 ? 6000 : 0;
            const obbaSaltCap = Math.min(saltDeduction, 40000); // SALT cap increased to $40k
            const obbaItemized = obbaSaltCap + otherItemized;
            const obbaDeduction = Math.max(obbaStandardDed + obbaSeniorDeduction, obbaItemized);
            const obbaTaxableIncome = Math.max(0, income - obbaDeduction);
            const obbaIncomeTax = calculateIncomeTax(obbaTaxableIncome, obbaBrackets[filingStatus]);
            const obbaChildCredit = children * 2200; // $2,200 per child
            const obbaTotalTax = Math.max(0, obbaIncomeTax - obbaChildCredit);

            // Pre-TCJA calculations
            const preTcjaStandardDed = standardDeductions.preTcja[filingStatus];
            const preTcjaPersonalExemptions = personalExemption * (filingStatus === 'marriedJoint' ? 2 + children : 1 + children);
            const preTcjaItemized = saltDeduction + otherItemized; // No SALT cap
            const preTcjaDeduction = Math.max(preTcjaStandardDed, preTcjaItemized) + preTcjaPersonalExemptions;
            const preTcjaTaxableIncome = Math.max(0, income - preTcjaDeduction);
            const preTcjaIncomeTax = calculateIncomeTax(preTcjaTaxableIncome, preTcjaBrackets[filingStatus]);
            const preTcjaChildCredit = children * 1000; // $1,000 per child
            const preTcjaTotalTax = Math.max(0, preTcjaIncomeTax - preTcjaChildCredit);

            // Calculate savings
            const savings = preTcjaTotalTax - obbaTotalTax;
            const obbaEffectiveRate = income > 0 ? (obbaTotalTax / income * 100) : 0;
            const preTcjaEffectiveRate = income > 0 ? (preTcjaTotalTax / income * 100) : 0;

            // Display results
            document.getElementById('obbaTax').textContent = `$${obbaTotalTax.toLocaleString()}`;
            document.getElementById('obbaRate').textContent = `Effective Rate: ${obbaEffectiveRate.toFixed(1)}%`;
            document.getElementById('preTcjaTax').textContent = `$${preTcjaTotalTax.toLocaleString()}`;
            document.getElementById('preTcjaRate').textContent = `Effective Rate: ${preTcjaEffectiveRate.toFixed(1)}%`;
            
            document.getElementById('savingsAmount').textContent = savings >= 0 ? `$${savings.toLocaleString()}` : `-$${Math.abs(savings).toLocaleString()}`;
            document.getElementById('savingsText').textContent = savings >= 0 ? 'Annual Tax Savings with OBBA' : 'Additional Tax Under OBBA';

            // Update breakdown table
            const breakdownTable = document.getElementById('breakdownTable');
            breakdownTable.innerHTML = `
                <tr>
                    <td class="highlight">Standard Deduction</td>
                    <td>$${obbaStandardDed.toLocaleString()}</td>
                    <td>$${preTcjaStandardDed.toLocaleString()}</td>
                    <td>$${(obbaStandardDed - preTcjaStandardDed).toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">Personal Exemptions</td>
                    <td>$0 (eliminated)</td>
                    <td>$${preTcjaPersonalExemptions.toLocaleString()}</td>
                    <td>-$${preTcjaPersonalExemptions.toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">Senior Deduction (65+)</td>
                    <td>$${obbaSeniorDeduction.toLocaleString()}</td>
                    <td>$0</td>
                    <td>$${obbaSeniorDeduction.toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">SALT Deduction Used</td>
                    <td>$${obbaSaltCap.toLocaleString()}</td>
                    <td>$${saltDeduction.toLocaleString()}</td>
                    <td>$${(obbaSaltCap - saltDeduction).toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">Taxable Income</td>
                    <td>$${obbaTaxableIncome.toLocaleString()}</td>
                    <td>$${preTcjaTaxableIncome.toLocaleString()}</td>
                    <td>$${(obbaTaxableIncome - preTcjaTaxableIncome).toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">Income Tax (before credits)</td>
                    <td>$${obbaIncomeTax.toLocaleString()}</td>
                    <td>$${preTcjaIncomeTax.toLocaleString()}</td>
                    <td>$${(obbaIncomeTax - preTcjaIncomeTax).toLocaleString()}</td>
                </tr>
                <tr>
                    <td class="highlight">Child Tax Credit</td>
                    <td>$${obbaChildCredit.toLocaleString()}</td>
                    <td>$${preTcjaChildCredit.toLocaleString()}</td>
                    <td>$${(obbaChildCredit - preTcjaChildCredit).toLocaleString()}</td>
                </tr>
                <tr style="background: #f1c40f; font-weight: bold;">
                    <td class="highlight">Final Tax Owed</td>
                    <td>$${obbaTotalTax.toLocaleString()}</td>
                    <td>$${preTcjaTotalTax.toLocaleString()}</td>
                    <td>${savings >= 0 ? '-' : '+'}$${Math.abs(savings).toLocaleString()}</td>
                </tr>
            `;

            document.getElementById('results').style.display = 'block';
            document.getElementById('placeholder').style.display = 'none';
        }
    </script>
</body>
</html>
